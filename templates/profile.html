{% extends "layout.html" %}
{% block content %}
<h2>Profile</h2>
<div class="row">
  <div class="col-md-6">
    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
      <div class="mb-3">
        <label class="form-label">Name</label>
        <input class="form-control" name="name" value="{{ user.name }}">
      </div>
      <div class="mb-3">
        <label class="form-label">Email (read-only)</label>
        <input class="form-control" value="{{ user.email }}" readonly>
      </div>
      <button class="btn btn-primary">Update profile</button>
    </form>
  </div>

  <div class="col-md-6">
    <h5>Your Referral Codes</h5>
    {% if referrals %}
      <ul class="list-group">
        {% for r in referrals %}
          <li class="list-group-item">
            <strong>{{ r.code }}</strong> â€” uses: {{ r.uses }}/{{ r.max_uses }}
            <div class="mt-2">
              <button class="btn btn-sm btn-outline-primary copy-code" data-code="{{ r.code }}">Copy code</button>
              <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('index') }}?ref={{ r.code }}">Share link</a>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No referral codes yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}